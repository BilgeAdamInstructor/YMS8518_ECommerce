"use strict";var KTAppInbox=function(){var i,t,a,e,n=function(i){i=new Quill("#"+i,{modules:{toolbar:{}},placeholder:"Type message...",theme:"snow"})},s=function(i){i=KTUtil.getByID(i);var t=KTUtil.find(i,"[name=compose_to]"),a=(new Tagify(t,{delimiters:", ",maxTags:10,blacklist:["fuck","shit","pussy"],keepInvalidTags:!0,whitelist:[{value:"Chris Muller",email:"chris.muller@wix.com",initials:"",initialsState:"",pic:"./assets/media/users/100_11.jpg",class:"tagify__tag--brand"},{value:"Nick Bold",email:"nick.seo@gmail.com",initials:"SS",initialsState:"warning",pic:""},{value:"Alon Silko",email:"alon@keenthemes.com",initials:"",initialsState:"",pic:"./assets/media/users/100_6.jpg"},{value:"Sam Seanic",email:"sam.senic@loop.com",initials:"",initialsState:"",pic:"./assets/media/users/100_8.jpg"},{value:"Sara Loran",email:"sara.loran@tilda.com",initials:"",initialsState:"",pic:"./assets/media/users/100_9.jpg"},{value:"Eric Davok",email:"davok@mix.com",initials:"",initialsState:"",pic:"./assets/media/users/100_13.jpg"},{value:"Sam Seanic",email:"sam.senic@loop.com",initials:"",initialsState:"",pic:"./assets/media/users/100_13.jpg"},{value:"Lina Nilson",email:"lina.nilson@loop.com",initials:"LN",initialsState:"danger",pic:"./assets/media/users/100_15.jpg"}],templates:{dropdownItem:function(i){try{var t="";return t+='<div class="tagify__dropdown__item">',t+='   <div class="kt-media-card">',t+='       <span class="kt-media kt-media--'+(i.initialsState?i.initialsState:"")+'" style="background-image: url(\''+(i.pic?i.pic:"")+"')\">",t+="           <span>"+(i.initials?i.initials:"")+"</span>",t+="       </span>",t+='       <div class="kt-media-card__info">',t+='           <a href="#" class="kt-media-card__title">'+(i.value?i.value:"")+"</a>",t+='           <span class="kt-media-card__desc">'+(i.email?i.email:"")+"</span>",t+="       </div>",t+="   </div>",t+="</div>"}catch(i){}}},transformTag:function(i){i.class="tagify__tag tagify__tag--brand"},dropdown:{classname:"color-blue",enabled:1,maxItems:5}}),KTUtil.find(i,"[name=compose_cc]")),e=(new Tagify(a,{delimiters:", ",maxTags:10,blacklist:["fuck","shit","pussy"],keepInvalidTags:!0,whitelist:[{value:"Chris Muller",email:"chris.muller@wix.com",initials:"",initialsState:"",pic:"./assets/media/users/100_11.jpg",class:"tagify__tag--brand"},{value:"Nick Bold",email:"nick.seo@gmail.com",initials:"SS",initialsState:"warning",pic:""},{value:"Alon Silko",email:"alon@keenthemes.com",initials:"",initialsState:"",pic:"./assets/media/users/100_6.jpg"},{value:"Sam Seanic",email:"sam.senic@loop.com",initials:"",initialsState:"",pic:"./assets/media/users/100_8.jpg"},{value:"Sara Loran",email:"sara.loran@tilda.com",initials:"",initialsState:"",pic:"./assets/media/users/100_9.jpg"},{value:"Eric Davok",email:"davok@mix.com",initials:"",initialsState:"",pic:"./assets/media/users/100_13.jpg"},{value:"Sam Seanic",email:"sam.senic@loop.com",initials:"",initialsState:"",pic:"./assets/media/users/100_13.jpg"},{value:"Lina Nilson",email:"lina.nilson@loop.com",initials:"LN",initialsState:"danger",pic:"./assets/media/users/100_15.jpg"}],templates:{dropdownItem:function(i){try{var t="";return t+='<div class="tagify__dropdown__item">',t+='   <div class="kt-media-card">',t+='       <span class="kt-media kt-media--'+(i.initialsState?i.initialsState:"")+'" style="background-image: url(\''+(i.pic?i.pic:"")+"')\">",t+="           <span>"+(i.initials?i.initials:"")+"</span>",t+="       </span>",t+='       <div class="kt-media-card__info">',t+='           <a href="#" class="kt-media-card__title">'+(i.value?i.value:"")+"</a>",t+='           <span class="kt-media-card__desc">'+(i.email?i.email:"")+"</span>",t+="       </div>",t+="   </div>",t+="</div>"}catch(i){}}},transformTag:function(i){i.class="tagify__tag tagify__tag--brand"},dropdown:{classname:"color-blue",enabled:1,maxItems:5}}),KTUtil.find(i,"[name=compose_bcc]"));new Tagify(e,{delimiters:", ",maxTags:10,blacklist:["fuck","shit","pussy"],keepInvalidTags:!0,whitelist:[{value:"Chris Muller",email:"chris.muller@wix.com",initials:"",initialsState:"",pic:"./assets/media/users/100_11.jpg",class:"tagify__tag--brand"},{value:"Nick Bold",email:"nick.seo@gmail.com",initials:"SS",initialsState:"warning",pic:""},{value:"Alon Silko",email:"alon@keenthemes.com",initials:"",initialsState:"",pic:"./assets/media/users/100_6.jpg"},{value:"Sam Seanic",email:"sam.senic@loop.com",initials:"",initialsState:"",pic:"./assets/media/users/100_8.jpg"},{value:"Sara Loran",email:"sara.loran@tilda.com",initials:"",initialsState:"",pic:"./assets/media/users/100_9.jpg"},{value:"Eric Davok",email:"davok@mix.com",initials:"",initialsState:"",pic:"./assets/media/users/100_13.jpg"},{value:"Sam Seanic",email:"sam.senic@loop.com",initials:"",initialsState:"",pic:"./assets/media/users/100_13.jpg"},{value:"Lina Nilson",email:"lina.nilson@loop.com",initials:"LN",initialsState:"danger",pic:"./assets/media/users/100_15.jpg"}],templates:{dropdownItem:function(i){try{var t="";return t+='<div class="tagify__dropdown__item">',t+='   <div class="kt-media-card">',t+='       <span class="kt-media kt-media--'+(i.initialsState?i.initialsState:"")+'" style="background-image: url(\''+(i.pic?i.pic:"")+"')\">",t+="           <span>"+(i.initials?i.initials:"")+"</span>",t+="       </span>",t+='       <div class="kt-media-card__info">',t+='           <a href="#" class="kt-media-card__title">'+(i.value?i.value:"")+"</a>",t+='           <span class="kt-media-card__desc">'+(i.email?i.email:"")+"</span>",t+="       </div>",t+="   </div>",t+="</div>"}catch(i){}}},transformTag:function(i){i.class="tagify__tag tagify__tag--brand"},dropdown:{classname:"color-blue",enabled:1,maxItems:5}});KTUtil.on(i,".kt-inbox__to .kt-inbox__tool.kt-inbox__tool--cc","click",function(t){var a=KTUtil.find(i,".kt-inbox__to");KTUtil.addClass(a,"kt-inbox__to--cc"),KTUtil.find(i,"[name=compose_cc]").focus()}),KTUtil.on(i,".kt-inbox__to .kt-inbox__field.kt-inbox__field--cc .kt-inbox__icon--delete","click",function(t){var a=KTUtil.find(i,".kt-inbox__to");KTUtil.removeClass(a,"kt-inbox__to--cc")}),KTUtil.on(i,".kt-inbox__to .kt-inbox__tool.kt-inbox__tool--bcc","click",function(t){var a=KTUtil.find(i,".kt-inbox__to");KTUtil.addClass(a,"kt-inbox__to--bcc"),KTUtil.find(i,"[name=compose_bcc]").focus()}),KTUtil.on(i,".kt-inbox__to .kt-inbox__field.kt-inbox__field--bcc .kt-inbox__icon--delete","click",function(t){var a=KTUtil.find(i,".kt-inbox__to");KTUtil.removeClass(a,"kt-inbox__to--bcc")})},l=function(i){var t="#"+i,a=$(t+" .dropzone-item");a.id="";var e=a.parent(".dropzone-items").html();a.remove();var n=new Dropzone(t,{url:"https://keenthemes.com/scripts/void.php",parallelUploads:20,maxFilesize:1,previewTemplate:e,previewsContainer:t+" .dropzone-items",clickable:t+"_select"});n.on("addedfile",function(i){$(document).find(t+" .dropzone-item").css("display","")}),n.on("totaluploadprogress",function(i){document.querySelector(t+" .progress-bar").style.width=i+"%"}),n.on("sending",function(i){document.querySelector(t+" .progress-bar").style.opacity="1"}),n.on("complete",function(i){var a=t+" .dz-complete";setTimeout(function(){$(a+" .progress-bar, "+a+" .progress").css("opacity","0")},300)})};return{init:function(){i=KTUtil.getByID("kt_inbox_aside"),t=KTUtil.getByID("kt_inbox_list"),a=KTUtil.getByID("kt_inbox_view"),e=KTUtil.getByID("kt_inbox_compose"),KTAppInbox.initAside(),KTAppInbox.initList(),KTAppInbox.initView(),KTAppInbox.initReply(),KTAppInbox.initCompose()},initAside:function(){new KTOffcanvas(i,{overlay:!0,baseClass:"kt-inbox__aside",closeBy:"kt_inbox_aside_close",toggleBy:"kt_subheader_mobile_toggle"}),KTUtil.on(i,'.kt-nav__item .kt-nav__link[data-action="list"]',"click",function(e){var n=KTUtil.attr(this,"data-type"),s=KTUtil.find(t,".kt-inbox__items"),l=this.closest(".kt-nav__item"),o=KTUtil.find(i,".kt-nav__item.kt-nav__item--active"),c=new KTDialog({type:"loader",placement:"top center",message:"Loading ..."});c.show(),setTimeout(function(){c.hide(),KTUtil.css(t,"display","flex"),KTUtil.css(a,"display","none"),KTUtil.addClass(l,"kt-nav__item--active"),KTUtil.removeClass(o,"kt-nav__item--active"),KTUtil.attr(s,"data-type",n)},600)})},initList:function(){KTUtil.on(t,".kt-inbox__item","click",function(i){var e=KTUtil.find(this,".kt-inbox__actions");if(i.target===e||e&&!0===e.contains(i.target))return!1;var n=new KTDialog({type:"loader",placement:"top center",message:"Loading ..."});n.show(),setTimeout(function(){n.hide(),KTUtil.css(t,"display","none"),KTUtil.css(a,"display","flex")},700)}),KTUtil.on(t,".kt-inbox__toolbar .kt-inbox__check .kt-checkbox input","click",function(){for(var i=KTUtil.findAll(t,".kt-inbox__items .kt-inbox__item"),a=0,e=i.length;a<e;a++){var n=i[a];KTUtil.find(n,".kt-inbox__actions .kt-checkbox input").checked=this.checked,this.checked?KTUtil.addClass(n,"kt-inbox__item--selected"):KTUtil.removeClass(n,"kt-inbox__item--selected")}}),KTUtil.on(t,".kt-inbox__item .kt-checkbox input","click",function(){var i=this.closest(".kt-inbox__item");i&&this.checked?KTUtil.addClass(i,"kt-inbox__item--selected"):KTUtil.removeClass(i,"kt-inbox__item--selected")})},initView:function(){KTUtil.on(a,".kt-inbox__toolbar .kt-inbox__icon.kt-inbox__icon--back","click",function(){var i=new KTDialog({type:"loader",placement:"top center",message:"Loading ..."});i.show(),setTimeout(function(){i.hide(),KTUtil.css(t,"display","flex"),KTUtil.css(a,"display","none")},700)}),KTUtil.on(a,".kt-inbox__messages .kt-inbox__message .kt-inbox__head","click",function(i){var t=KTUtil.find(this,".kt-inbox__details .kt-inbox__tome .kt-inbox__label"),a=KTUtil.find(this,".kt-inbox__actions .kt-inbox__group");if(i.target===t||t&&!0===t.contains(i.target))return!1;if(i.target===a||a&&!0===a.contains(i.target))return!1;var e=this.closest(".kt-inbox__message");KTUtil.hasClass(e,"kt-inbox__message--expanded")?KTUtil.removeClass(e,"kt-inbox__message--expanded"):KTUtil.addClass(e,"kt-inbox__message--expanded")})},initReply:function(){n("kt_inbox_reply_editor"),l("kt_inbox_reply_attachments"),s("kt_inbox_reply_form"),KTUtil.on(a,".kt-inbox__reply .kt-inbox__actions .btn","click",function(i){var t=this.closest(".kt-inbox__reply");KTUtil.hasClass(t,"kt-inbox__reply--on")?KTUtil.removeClass(t,"kt-inbox__reply--on"):KTUtil.addClass(t,"kt-inbox__reply--on")}),KTUtil.on(a,".kt-inbox__message .kt-inbox__actions .kt-inbox__group .kt-inbox__icon.kt-inbox__icon--reply","click",function(i){var t=KTUtil.find(a,".kt-inbox__reply");KTUtil.addClass(t,"kt-inbox__reply--on")}),KTUtil.on(a,".kt-inbox__reply .kt-inbox__foot .kt-inbox__icon--remove","click",function(i){var t=this.closest(".kt-inbox__reply");swal.fire({text:"Are you sure to discard this reply ?",buttonsStyling:!1,confirmButtonText:"Discard reply",confirmButtonClass:"btn btn-danger",showCancelButton:!0,cancelButtonText:"Cancel",cancelButtonClass:"btn btn-label-brand"}).then(function(i){KTUtil.hasClass(t,"kt-inbox__reply--on")&&KTUtil.removeClass(t,"kt-inbox__reply--on")})})},initCompose:function(){n("kt_inbox_compose_editor"),l("kt_inbox_compose_attachments"),s("kt_inbox_compose_form"),KTUtil.on(e,".kt-inbox__form .kt-inbox__foot .kt-inbox__secondary .kt-inbox__icon.kt-inbox__icon--remove","click",function(i){swal.fire({text:"Are you sure to discard this message ?",type:"danger",buttonsStyling:!1,confirmButtonText:"Discard draft",confirmButtonClass:"btn btn-danger",showCancelButton:!0,cancelButtonText:"Cancel",cancelButtonClass:"btn btn-label-brand"}).then(function(i){$(e).modal("hide")})})}}}();KTUtil.ready(function(){KTAppInbox.init()});